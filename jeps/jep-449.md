JEP 449: Deprecate the Windows 32-bit x86 Port for Removal
======================================================================

| Author | George Adams & Bruno Borges | 
| Owner | George Adams | 
| Type | Feature | 
| Scope | Implementation | 
| Status | Closed / Delivered | 
| Release | 21 | 
| Component | hotspot / other | 
| Discussion | jdk dash dev at openjdk dot org | 
| Effort | S | 
| Duration | S | 
| Relates to | JEP 479: Remove the Windows 32-bit x86 Port](479) | 
|  | JEP 501: Deprecate the 32-bit x86 Port for Removal](501) | 
| Reviewed by | Jesper Wilhelmsson | 
| Endorsed by | Dalibor Topic, Vladimir Kozlov | 
| Created | 2023/02/24 15:30 | 
| Updated | 2024/10/24 11:25 | 
| Issue | 8303167](https://bugs.openjdk.org/browse/JDK-8303167) | 

## Summary

Deprecate the Windows 32-bit x86 port, with the intent to remove it in a future release.

## Goals

- 
Update the build system to issue an error message when an attempt is made to configure a build for Windows 32-bit x86 (x86-32). The error message will be suppressible via a new configuration option.

- 
Mark the port, and related port-specific features, as deprecated for removal in the relevant documentation.

## Non-Goals

- 
It is not a goal to change the status of the affected port in any prior release. The earliest release to which this JEP could be targeted is JDK 21.

- 
It is not a goal to deprecate any other 32-bit port.

## Motivation

- 
Allow contributors in the OpenJDK Community to accelerate the development of new features and enhancements that will move the platform forward.

- 
The implementation ofJEP 436 (Virtual Threads)](https://openjdk.org/jeps/436)for Windows x86-32 falls back to the use of kernel threads and therefore does not bring the expected benefits of Project Loom.

- 
Windows 10, the last Windows operating system to support 32-bit operation, will reach End of Life inOctober 2025](https://learn.microsoft.com/lifecycle/products/windows-10-home-and-pro).

## Description

An attempt to configure a Windows x86-32 build will produce the following output:

```
$ bash ./configure
...
checking compilation type... native
configure: error: The Windows 32-bit x86 port is deprecated and may be removed in a future release. \
Use --enable-deprecated-ports=yes to suppress this error.
configure exiting with result code 1
$
```

The new build configuration option`--enable-deprecated-ports=yes`will suppress the error and continue:

```
$ bash ./configure --enable-deprecated-ports=yes
...
checking compilation type... native
configure: WARNING: The Windows 32-bit x86 port is deprecated and may be removed in a future release.
...
Build performance summary:
* Cores to use:   32
* Memory limit:   96601 MB

The following warnings were produced. Repeated here for convenience:
WARNING: The Windows 32-bit x86 port is deprecated and may be removed in a future release.
$
```

## Alternatives

The alternative would be to continue to support Windows x86-32. This would require active maintainers who can provide a sustainable and performant implementation of Virtual Threads, as well as future JEPs, to ensure that the JDK on Windows x86-32 continues to meet the expectations of Java developers.

## Risks and Assumptions

32-bit JVMs are still used on Windows due to integration with 32-bit native libraries (DLLs). Their users cannot migrate directly to 64-bit JVMs because a 64-bit process on Windows cannot load 32-bit DLLs. While Windows x64 is capable of running 32-bit applications by emulating an 32-bit environment throughWOW64](https://learn.microsoft.com/en-us/windows/win32/winprog64/running-32-bit-applications), applications will sufferdramatic performance degradation](https://learn.microsoft.com/en-us/troubleshoot/windows-server/performance/compatibility-limitations-32-bit-programs-64-bit-system#program-performance-considerations)despite the assumed memory footprint benefits.

We therefore assume that

- 
Users can continue to run existing builds of the Windows 32-bit JVM to integrate with native 32-bit libraries and, if necessary, expose 32-bit functionality via remote APIs to be consumed by applications running on a 64-bit JVM within the same environment; and

- 
Legacy systems are unlikely to migrate to versions of the JDK following the release of Java 21.